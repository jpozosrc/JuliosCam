<html>
  
  <head>
    <base href="/">
    <title>Camera Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
 
  <body>

    <div class="centered">
    
        <div class="row centered">
            <button type="button" onclick="takeVideo()">Take Video</button><button type="button" onclick="takePicture()">Take Picture</button><br/>
            <video id="myVideo" width="100" height="100"></video><br/>
            <canvas id="myCanvas" width="100", height="100"></canvas><br/><br/>
            <img id="myPhoto" style="width:100px;height:100px;border:1px solid red;" />

        </div>
    
    </div>

  </body>

  <script>

      var onCameraSuccess = function(videoStream)
      {
          try
          {
              // Capture video with camera
              var video = document.getElementById("myVideo");
              video.src = window.URL.createObjectURL(videoStream);
              video.play();
         }
          catch(e)
          {
              alert(e)
          }
      }

      var onCameraError = function(error)
      { 
          switch(error.name)
          {
              case "DevicesNotFoundError" :
              case "NotFoundError" :
                alert("You don't have a camera :(");
                break;
              default :
                alert("Unable to take  pictures. " + error.name);
          }
      }

      function takeVideo()
      {
          try
          {
              if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)
              {
                  navigator.mediaDevices.getUserMedia({video: true})
                    .then(onCameraSuccess, onCameraError);
              }
              else
              {
                  navigator.getMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.getUserMedia;

                  if(navigator.getMedia)
                  {
                      navigator.getMedia({video: true}, onCameraSuccess, onCameraError);
                  }
                  else
                  {
                      alert("Your browser does not support this feature.");
                  }
              }
          }
          catch(e)
          {
              alert(e);
          }
      }

      function takePicture()
      {
        // Take snapshot of video and obtain its URL data
        var canvas = document.getElementById("myCanvas");
        var video = document.getElementById("myVideo");
        canvas.getContext("2d").drawImage(video, 0, 0, 100, 100);
        var photo = document.getElementById("myPhoto");
        photo.src = canvas.toDataURL("image/webp");
      }


  </script>

</html>