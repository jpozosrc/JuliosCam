<html>
  
  <head>
    <base href="/">
    <title>Camera Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
 
  <body>

    <div class="centered">
    
        <div class="row centered">
            <button type="button" onclick="takePicture()">Take Picture</button><br/>
            <video id="myVideo" autoplay width="100" height="100"></video><br/>
            <canvas id="myCanvas"></canvas><br/>
            <img id="myPhoto" height="100" width="100"/>

        </div>
    
    </div>

  </body>

  <script>

      var pictureTarget;

      var onCameraSuccess = function(videoStream)
      {
          try
          {
              // Capture video with camera
              var video = document.getElementById("myVideo");
              video.src = window.URL.createObjectURL(videoStream);

              // Take snapshot of video and obtain its URL data
              var canvas = document.getElementById("myCanvas");
              canvas.getContext("2d").drawImage(video, 100, 100);
              var data = canvas.toDataURL("image/png");

              // Render image tag
              var photo = document.getElementById("myPhoto");
              photo.src = data;
         }
          catch(e)
          {
              alert(e)
          }
      }

      var onCameraError = function(error)
      { 
          switch(error.name)
          {
              case "DevicesNotFoundError" :
              case "NotFoundError" :
                alert("You don't have a camera :(");
                break;
              default :
                alert("Unable to take  pictures. " + error.name);
          }
      }

      function takePicture(target)
      {
          try
          {
              pictureTarget = target;

              if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)
              {
                  navigator.mediaDevices.getUserMedia({video: true})
                    .then(onCameraSuccess, onCameraError);
              }
              else
              {
                  navigator.getMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.getUserMedia;

                  if(navigator.getMedia)
                  {
                      navigator.getMedia({video: true}, onCameraSuccess, onCameraError);
                  }
                  else
                  {
                      alert("Your browser does not support this feature.");
                  }
              }
          }
          catch(e)
          {
              alert(e);
          }
      }


  </script>

</html>