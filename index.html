<html>
  
  <head>
    <base href="/">
    <title>Camera Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
 
  <body>

    <div class="centered">
    
        <div class="row centered">
            <button type="button" onclick="takePicture()">Take Picture</button><br/><br/>
            <video id="myVideo" autoplay></video><img id="myPhoto" style="margin-left:10px;width:75px;height:100px;" /><br/>
            <canvas id="myCanvas"></canvas><br/><br/>
            <video id="myVideo" autoplay></video><img id="myPhoto" style="margin-left:10px;" /><br/>
            <canvas id="myCanvas"></canvas><br/><br/>
        </div>
    
    </div>

  </body>

  <script>

      var onCameraSuccess = function(videoStream)
      {
          try
          {
              // Capture video with camera
              var video = document.getElementById("myVideo");
              video.src = window.URL.createObjectURL(videoStream);

              setTimeout
              (
                  function()
                  {        
                        // Take snapshot of video and obtain its URL data
                        var canvas = document.getElementById("myCanvas");
                        canvas.setAttribute("style", "visibility:visible;width:100px;height:75px;")
                        canvas.getContext("2d").drawImage(video, 0, 0, 75,100,75,100);
                        
                        canvas.getContext("2d").drawImage(video, 0, 0, 75, 100);
                        var photo = document.getElementById("myPhoto");
                        photo.src = canvas.toDataURL("image/webp");
                        canvas.setAttribute("style", "visibility:hidden;")
                  }, 2000
              );
          }
          catch(e)
          {
              alert(e)
          }
      }

      var onCameraError = function(error)
      { 
          switch(error.name)
          {
              case "DevicesNotFoundError" :
              case "NotFoundError" :
                alert("You don't have a camera :(");
                break;
              default :
                alert("Unable to take  pictures. " + error.name);
          }
      }

      function takePicture()
      {
          try
          {
              if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia)
              {
                  navigator.mediaDevices.getUserMedia({video: true})
                    .then(onCameraSuccess, onCameraError);
              }
              else
              {
                  navigator.getMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.getUserMedia;

                  if(navigator.getMedia)
                  {
                      navigator.getMedia({video: true}, onCameraSuccess, onCameraError);
                  }
                  else
                  {
                      alert("Your browser does not support this feature.");
                  }
              }
          }
          catch(e)
          {
              alert(e);
          }
      }

   </script>

</html>